##first we will login to the third machine or the worker node and create a folder 
  sudo -i
   36  cd /root/.kube
   37  mkdir /mnt/data
#############################################
  #lets do all the other activity from the second machine or the master node
  ###we will create a persistent volume 
  [root@ip-172-31-115-211 ~]$ nano pv.yml
apiVersion: v1
kind: PersistentVolume
metadata:
  name: task-pv 
spec:
  capacity:
    storage: 5Gi
  volumeMode: Filesystem #it will look for the filesystem 
  accessModes:
    - ReadWriteOnce #read #readwritemany
  #persistentVolumeReclaimPolicy: Recycle #immedate 
  storageClassName: slow
  hostPath:
    path: "/mnt/data" #this is the path in the host machine where the data will be stored

[root@ip-172-31-115-211 ~]$ kubectl apply -f pv.yml
persistentvolume/task-pv created
[root@ip-172-31-115-211 ~]$ kubectl get pv
NAME      CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS      CLAIM   STORAGECLASS   VOLUMEATTRIBUTESCLASS   REASON   AGE
task-pv   5Gi        RWO            Retain           Available           slow           <unset>                          5s
[root@ip-172-31-115-211 ~]$

      ###lets create the pvc
  [root@ip-172-31-115-211 ~]$ nano pvc.yml
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
  name: task-pv-claim
spec:
  resources:
    requests:
      storage: 5Gi
  storageClassName: slow #this storage class name match with the pvc class name
  volumeMode: Filesystem
  accessModes:
    - ReadWriteOnce

[root@ip-172-31-115-211 ~]$ kubectl apply -f pvc.yml
persistentvolumeclaim/task-pv-claim created
      #now again you check the pv it will show the status as bound 
[root@ip-172-31-115-211 ~]$ kubectl get pv
NAME      CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS   CLAIM                   STORAGECLASS   VOLUMEATTRIBUTESCLASS   REASON   AGE
task-pv   5Gi        RWO            Retain           Bound    default/task-pv-claim   slow           <unset>                          2m43s
[root@ip-172-31-115-211 ~]$ kubectl get pvc
NAME            STATUS   VOLUME    CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE
task-pv-claim   Bound    task-pv   5Gi        RWO            slow           <unset>                 22s
[root@ip-172-31-115-211 ~]$



